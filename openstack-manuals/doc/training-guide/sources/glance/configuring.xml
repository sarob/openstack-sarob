<?xml version="1.0" encoding="utf-8"?>
  <section xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  version="5.0"
  xml:id="Basic-Configuration">
<title>Basic Configuration</title>
<section xml:id="page-abstract">
<title>Page Abstract</title>
<para>  Glance has a number of options that you can use to configure the
  Glance API server, the Glance Registry server, and the various storage
  backends that Glance can use to store images.
</para>
<para>
  Most configuration is done via configuration files, with the Glance
  API server and Glance Registry server using separate configuration
  files.
</para>
<para>
  When starting up a Glance server, you can specify the configuration
  file to use (see
  the documentation on controller Glance servers &lt;controllingservers&gt;).
  If you do <emphasis role="strong">not</emphasis> specify a
  configuration file, Glance will look in the following directories for
  a configuration file, in order:
</para>
<itemizedlist>
  <listitem>
    <para>
      <literal>~/.glance</literal>
    </para>
  </listitem>
  <listitem>
    <para>
      <literal>~/</literal>
    </para>
  </listitem>
  <listitem>
    <para>
      <literal>/etc/glance</literal>
    </para>
  </listitem>
  <listitem>
    <para>
      <literal>/etc</literal>
    </para>
  </listitem>
</itemizedlist>
<para>
  The Glance API server configuration file should be named
  <literal>glance-api.conf</literal>. Similarly, the Glance Registry
  server configuration file should be named
  <literal>glance-registry.conf</literal>. If you installed Glance via
  your operating system's package management system, it is likely that
  you will have sample configuration files installed in
  <literal>/etc/glance</literal>.
</para>
<para>
  In addition to this documentation page, you can check the
  <literal>etc/glance-api.conf</literal> and
  <literal>etc/glance-registry.conf</literal> sample configuration files
  distributed with Glance for example configuration files for each
  server application with detailed comments on what each options does.
</para>
<para>
  The PasteDeploy configuration (controlling the deployment of the WSGI
  application for each component) may be found by default in
  &lt;component&gt;-paste.ini alongside the main configuration file,
  &lt;component&gt;.conf. For example,
  <literal>glance-api-paste.ini</literal> corresponds to
  <literal>glance-api.conf</literal>. This pathname for the paste config
  is configurable, as follows:
</para>
<programlisting>
[paste_deploy]
config_file = /path/to/paste/config
</programlisting>
</section>
<section xml:id="common-configuration-options-in-glance">
  <title>Common Configuration Options in Glance</title>
  <para>
    Glance has a few command-line options that are common to all Glance
    programs:
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>--verbose</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    Optional. Default: <literal>False</literal>
  </para>
  <para>
    Can be specified on the command line and in configuration files.
  </para>
  <para>
    Turns on the INFO level in logging and prints more verbose
    command-line interface printouts.
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>--debug</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    Optional. Default: <literal>False</literal>
  </para>
  <para>
    Can be specified on the command line and in configuration files.
  </para>
  <para>
    Turns on the DEBUG level in logging.
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>--config-file=PATH</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    Optional. Default: See below for default search order.
  </para>
  <para>
    Specified on the command line only.
  </para>
  <para>
    Takes a path to a configuration file to use when running the
    program. If this CLI option is not specified, then we check to see
    if the first argument is a file. If it is, then we try to use that
    as the configuration file. If there is no file or there were no
    arguments, we search for a configuration file in the following
    order:
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>~/.glance</literal>
      </para>
    </listitem>
    <listitem>
      <para>
        <literal>~/</literal>
      </para>
    </listitem>
    <listitem>
      <para>
        <literal>/etc/glance</literal>
      </para>
    </listitem>
    <listitem>
      <para>
        <literal>/etc</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    The filename that is searched for depends on the server application
    name. So, if you are starting up the API server,
    <literal>glance-api.conf</literal> is searched for, otherwise
    <literal>glance-registry.conf</literal>.
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>--config-dir=DIR</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    Optional. Default: <literal>None</literal>
  </para>
  <para>
    Specified on the command line only.
  </para>
  <para>
    Takes a path to a configuration directory from which all *.conf
    fragments are loaded. This provides an alternative to multiple
    --config-file options when it is inconvenient to explicitly
    enumerate all the config files, for example when an unknown number
    of config fragments are being generated by a deployment framework.
  </para>
  <para>
    If --config-dir is set, then --config-file is ignored.
  </para>
  <para>
    An example usage would be:
  </para>
  <blockquote>
    <para>
      $ glance-api --config-dir=/etc/glance/glance-api.d
    </para>
    <variablelist>
      <varlistentry>
        <term>
          $ ls /etc/glance/glance-api.d
        </term>
        <listitem>
          <para>
            00-core.conf 01-s3.conf 02-swift.conf 03-ssl.conf ... etc.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </blockquote>
  <para>
    The numeric prefixes in the example above are only necessary if a
    specific parse ordering is required (i.e. if an individual config
    option set in an earlier fragment is overridden in a later
    fragment).
  </para>
</section>
<section xml:id="configuring-server-startup-options">
  <title>Configuring Server Startup Options</title>
  <para>
    You can put the following options in the
    <literal>glance-api.conf</literal> and
    <literal>glance-registry.conf</literal> files, under the
    <literal>[DEFAULT]</literal> section. They enable startup and
    binding behaviour for the API and registry servers, respectively.
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>bind_host=ADDRESS</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    The address of the host to bind to.
  </para>
  <para>
    Optional. Default: <literal>0.0.0.0</literal>
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>bind_port=PORT</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    The port the server should bind to.
  </para>
  <para>
    Optional. Default: <literal>9191</literal> for the registry server,
    <literal>9292</literal> for the API server
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>backlog=REQUESTS</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    Number of backlog requests to configure the socket with.
  </para>
  <para>
    Optional. Default: <literal>4096</literal>
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>tcp_keepidle=SECONDS</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    Sets the value of TCP_KEEPIDLE in seconds for each server socket.
    Not supported on OS X.
  </para>
  <para>
    Optional. Default: <literal>600</literal>
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>workers=PROCESSES</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    Number of Glance API worker processes to start. Each worker process
    will listen on the same port. Increasing this value may increase
    performance (especially if using SSL with compression enabled).
    Typically it is recommended to have one worker process per CPU. The
    value 0 will prevent any new processes from being created.
  </para>
  <para>
    Optional. Default: <literal>1</literal>
  </para>
  <itemizedlist>
    <listitem>
      <para>
        <literal>db_auto_create=False</literal>
      </para>
    </listitem>
  </itemizedlist>
  <para>
    Whether to automatically create the database tables. Otherwise you
    can manually run glance-manage db_sync.
  </para>
  <para>
    Optional. Default: <literal>False</literal>
  </para>
<section xml:id="configurating-ssl-support">
    <title>Configurating SSL Support</title>
    <itemizedlist>
      <listitem>
        <para>
          <literal>cert_file=PATH</literal>
        </para>
      </listitem>
    </itemizedlist>
    <para>
      Path to the certificate file the server should use when binding to
      an SSL-wrapped socket.
    </para>
    <para>
      Optional. Default: not enabled.
    </para>
    <itemizedlist>
      <listitem>
        <para>
          <literal>key_file=PATH</literal>
        </para>
      </listitem>
    </itemizedlist>
    <para>
      Path to the private key file the server should use when binding to
      an SSL-wrapped socket.
    </para>
    <para>
      Optional. Default: not enabled.
    </para>
    <itemizedlist>
      <listitem>
        <para>
          <literal>ca_file=PATH</literal>
        </para>
      </listitem>
    </itemizedlist>
    <para>
      Path to the CA certificate file the server should use to validate
      client certificates provided during an SSL handshake. This is
      ignored if <literal>cert_file</literal> and
      ''key_file<literal>are not set.  Optional. Default: not enabled.  *</literal>registry_client_protocol=PROTOCOL<literal>If you run a secure Registry server, you need to set this value to</literal>https<literal>and also set</literal>registry_client_key_file<literal>and optionally</literal>registry_client_cert_file<literal>.  Optional. Default: http  *</literal>registry_client_key_file=PATH<literal>The path to the key file to use in SSL connections to the registry server, if any. Alternately, you may set the</literal>GLANCE_CLIENT_KEY_FILE<literal>environ variable to a filepath of the key file  Optional. Default: Not set.  *</literal>registry_client_cert_file=PATH<literal>Optional. Default: Not set.  The path to the cert file to use in SSL connections to the registry server, if any. Alternately, you may set the</literal>GLANCE_CLIENT_CERT_FILE<literal>environ variable to a filepath of the cert file  *</literal>registry_client_ca_file=PATH<literal>Optional. Default: Not set.  The path to a Certifying Authority's cert file to use in SSL connections to the registry server, if any. Alternately, you may set the</literal>GLANCE_CLIENT_CA_FILE<literal>environ variable to a filepath of the CA cert file  *</literal>registry_client_insecure=False<literal>Optional. Default: False.  When using SSL in connections to the registry server, do not require validation via a certifying authority. This is the registry's equivalent of specifying --insecure on the command line using glanceclient for the API  *</literal>registry_client_timeout=SECONDS<literal>Optional. Default:</literal>600<literal>.  The period of time, in seconds, that the API server will wait for a registry request to complete. A value of '0' implies no timeout.   Configuring Logging in Glance -----------------------------  There are a number of configuration options in Glance that control how Glance servers log messages.  *</literal>--log-config=PATH<literal>Optional. Default:</literal>None<literal>Specified on the command line only.  Takes a path to a configuration file to use for configuring logging.  Logging Options Available Only in Configuration Files ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  You will want to place the different logging options in the **[DEFAULT]** section in your application configuration file. As an example, you might do the following for the API server, in a configuration file called</literal>etc/glance-api.conf<literal>::    [DEFAULT]   log_file = /var/log/glance/api.log  *</literal>log_file<literal>The filepath of the file to use for logging messages from Glance's servers. If missing, the default is to output messages to</literal>stdout<literal>, so if you are running Glance servers in a daemon mode (using</literal>glance-control<literal>) you should make sure that the</literal>log_file<literal>option is set appropriately.  *</literal>log_dir<literal>The filepath of the directory to use for log files. If not specified (the default) the</literal>log_file<literal>is used as an absolute filepath.  *</literal>log_date_format<literal>The format string for timestamps in the log output.  Defaults to</literal>%Y-%m-%d
      %H:%M:%S<literal>. See the `logging module &lt;http://docs.python.org/library/logging.html&gt;`_ documentation for more information on setting this format string.  *</literal>log_use_syslog<literal>Use syslog logging functionality.  Defaults to False.  Configuring Glance Storage Backends -----------------------------------  There are a number of configuration options in Glance that control how Glance stores disk images. These configuration options are specified in the</literal>glance-api.conf<literal>config file in the section</literal>[DEFAULT]<literal>.  *</literal>default_store=STORE<literal>Optional. Default:</literal>file<literal>Can only be specified in configuration files.  Sets the storage backend to use by default when storing images in Glance. Available options for this option are (</literal>file<literal>,</literal>swift<literal>,</literal>s3<literal>,</literal>rbd<literal>, or</literal>sheepdog<literal>, or</literal>cinder<literal>).  Configuring Glance Image Size Limit -----------------------------------  The following configuration option is specified in the</literal>glance-api.conf<literal>config file in the section</literal>[DEFAULT]<literal>.  *</literal>image_size_cap=SIZE<literal>Optional. Default:</literal>1099511627776<literal>(1 TB)  Maximum image size, in bytes, which can be uploaded through the Glance API server.  **IMPORTANT NOTE**: this value should only be increased after careful consideration and must be set to a value under 8 EB (9223372036854775808).  Configuring Glance User Storage Quota -------------------------------------  The following configuration option is specified in the</literal>glance-api.conf<literal>config file in the section</literal>[DEFAULT]<literal>.  *</literal>user_storage_quota<literal>Optional. Default: 0 (Unlimited).  This value specifies the maximum amount of bytes that each user can use across all storage systems.  Configuring the Filesystem Storage Backend ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  *</literal>filesystem_store_datadir=PATH<literal>Optional. Default:</literal>/var/lib/glance/images/<literal>Can only be specified in configuration files.  `This option is specific to the filesystem storage backend.`  Sets the path where the filesystem storage backend write disk images. Note that the filesystem storage backend will attempt to create this directory if it does not exist. Ensure that the user that</literal>glance-api<literal>runs under has write permissions to this directory.  Configuring the Swift Storage Backend ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  *</literal>swift_store_auth_address=URL<literal>Required when using the Swift storage backend.  Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  Sets the authentication URL supplied to Swift when making calls to its storage system. For more information about the Swift authentication system, please see the `Swift auth &lt;http://swift.openstack.org/overview_auth.html&gt;`_ documentation and the `overview of Swift authentication &lt;http://docs.openstack.org/openstack-object-storage/admin/content/ch02s02.html&gt;`_.  **IMPORTANT NOTE**: Swift authentication addresses use HTTPS by default. This means that if you are running Swift with authentication over HTTP, you need to set your</literal>swift_store_auth_address<literal>to the full URL, including the</literal><link xlink:href="http://">http://</link><literal>.  *</literal>swift_store_user=USER<literal>Required when using the Swift storage backend.  Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  Sets the user to authenticate against the</literal>swift_store_auth_address<literal>with.  *</literal>swift_store_key=KEY<literal>Required when using the Swift storage backend.  Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  Sets the authentication key to authenticate against the</literal>swift_store_auth_address<literal>with for the user</literal>swift_store_user<literal>.  *</literal>swift_store_container=CONTAINER<literal>Optional. Default:</literal>glance<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  Sets the name of the container to use for Glance images in Swift.  *</literal>swift_store_create_container_on_put<literal>Optional. Default:</literal>False<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  If true, Glance will attempt to create the container</literal>swift_store_container<literal>if it does not exist.  *</literal>swift_store_large_object_size=SIZE_IN_MB<literal>Optional. Default:</literal>5120<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  What size, in MB, should Glance start chunking image files and do a large object manifest in Swift? By default, this is the maximum object size in Swift, which is 5GB  *</literal>swift_store_large_object_chunk_size=SIZE_IN_MB<literal>Optional. Default:</literal>200<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  When doing a large object manifest, what size, in MB, should Glance write chunks to Swift?  The default is 200MB.  *</literal>swift_store_multi_tenant=False<literal>Optional. Default:</literal>False<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  If set to True enables multi-tenant storage mode which causes Glance images to be stored in tenant specific Swift accounts. When set to False Glance stores all images in a single Swift account.  *</literal>swift_store_admin_tenants<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  Optional. Default: Not set.  A list of swift ACL strings that will be applied as both read and write ACLs to the containers created by Glance in multi-tenant mode. This grants the specified tenants/users read and write access to all newly created image objects. The standard swift ACL string formats are allowed, including:  &lt;tenant_id&gt;:&lt;username&gt; &lt;tenant_name&gt;:&lt;username&gt; \*:&lt;username&gt;  Multiple ACLs can be combined using a comma separated list, for example: swift_store_admin_tenants = service:glance,*:admin  *</literal>swift_store_auth_version<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  Optional. Default:</literal>2<literal>A string indicating which version of Swift OpenStack authentication to use. See the project `python-swiftclient &lt;http://docs.openstack.org/developer/python-swiftclient/&gt;`_ for more details.  *</literal>swift_store_service_type<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  Optional. Default:</literal>object-store<literal>A string giving the service type of the swift service to use. This setting is only used if swift_store_auth_version is</literal>2<literal>.  *</literal>swift_store_region<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  Optional. Default: Not set.  A string giving the region of the swift service endpoint to use. This setting is only used if swift_store_auth_version is</literal>2<literal>. This setting is especially useful for disambiguation if multiple swift services might appear in a service catalog during authentication.  *</literal>swift_store_endpoint_type<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  Optional. Default:</literal>publicURL<literal>A string giving the endpoint type of the swift service endpoint to use. This setting is only used if swift_store_auth_version is</literal>2<literal>.  *</literal>swift_store_ssl_compression<literal>Can only be specified in configuration files.  `This option is specific to the Swift storage backend.`  Optional. Default: True.  If set to False, disables SSL layer compression of https swift requests. Setting to 'False' may improve performance for images which are already in a compressed format, eg qcow2. If set to True then compression will be enabled (provided it is supported by the swift proxy).   Configuring the S3 Storage Backend ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  *</literal>s3_store_host=URL<literal>Required when using the S3 storage backend.  Can only be specified in configuration files.  `This option is specific to the S3 storage backend.`  Default: s3.amazonaws.com  Sets the main service URL supplied to S3 when making calls to its storage system. For more information about the S3 authentication system, please see the `S3 documentation &lt;http://aws.amazon.com/documentation/s3/&gt;`_  *</literal>s3_store_access_key=ACCESS_KEY<literal>Required when using the S3 storage backend.  Can only be specified in configuration files.  `This option is specific to the S3 storage backend.`  Sets the access key to authenticate against the</literal>s3_store_host<literal>with.  You should set this to your 20-character Amazon AWS access key.  *</literal>s3_store_secret_key=SECRET_KEY<literal>Required when using the S3 storage backend.  Can only be specified in configuration files.  `This option is specific to the S3 storage backend.`  Sets the secret key to authenticate against the</literal>s3_store_host<literal>with for the access key</literal>s3_store_access_key<literal>.  You should set this to your 40-character Amazon AWS secret key.  *</literal>s3_store_bucket=BUCKET<literal>Required when using the S3 storage backend.  Can only be specified in configuration files.  `This option is specific to the S3 storage backend.`  Sets the name of the bucket to use for Glance images in S3.  Note that the namespace for S3 buckets is **global**, therefore you must use a name for the bucket that is unique. It is recommended that you use a combination of your AWS access key, **lowercased** with &quot;glance&quot;.  For instance if your Amazon AWS access key is:</literal>ABCDEFGHIJKLMNOPQRST<literal>then make your bucket value be:</literal>abcdefghijklmnopqrstglance<literal>*</literal>s3_store_create_bucket_on_put<literal>Optional. Default:</literal>False<literal>Can only be specified in configuration files.  `This option is specific to the S3 storage backend.`  If true, Glance will attempt to create the bucket</literal>s3_store_bucket<literal>if it does not exist.  *</literal>s3_store_object_buffer_dir=PATH<literal>Optional. Default:</literal>the
      platform's default temporary
      directory<literal>Can only be specified in configuration files.  `This option is specific to the S3 storage backend.`  When sending images to S3, what directory should be used to buffer the chunks? By default the platform's temporary directory will be used.  Configuring the RBD Storage Backend ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  **Note**: the RBD storage backend requires the python bindings for librados and librbd. These are in the python-ceph package on Debian-based distributions.  *</literal>rbd_store_pool=POOL<literal>Optional. Default:</literal>rbd<literal>Can only be specified in configuration files.  `This option is specific to the RBD storage backend.`  Sets the RADOS pool in which images are stored.  *</literal>rbd_store_chunk_size=CHUNK_SIZE_MB<literal>Optional. Default:</literal>4<literal>Can only be specified in configuration files.  `This option is specific to the RBD storage backend.`  Images will be chunked into objects of this size (in megabytes). For best performance, this should be a power of two.  *</literal>rbd_store_ceph_conf=PATH<literal>Optional. Default:</literal>/etc/ceph/ceph.conf<literal>,</literal>~/.ceph/config<literal>, and</literal>./ceph.conf<literal>Can only be specified in configuration files.  `This option is specific to the RBD storage backend.`  Sets the Ceph configuration file to use.  *</literal>rbd_store_user=NAME<literal>Optional. Default:</literal>admin<literal>Can only be specified in configuration files.  `This option is specific to the RBD storage backend.`  Sets the RADOS user to authenticate as. This is only needed when `RADOS authentication &lt;http://ceph.newdream.net/wiki/Cephx&gt;`_ is `enabled. &lt;http://ceph.newdream.net/wiki/Cluster_configuration#Cephx_auth&gt;`_  A keyring must be set for this user in the Ceph configuration file, e.g. with a user</literal>glance<literal>::    [client.glance]   keyring=/etc/glance/rbd.keyring  To set up a user named</literal>glance<literal>with minimal permissions, using a pool called</literal>images<literal>, run::    rados mkpool images   ceph-authtool --create-keyring /etc/glance/rbd.keyring   ceph-authtool --gen-key --name client.glance --cap mon 'allow r' --cap osd 'allow rwx pool=images' /etc/glance/rbd.keyring   ceph auth add client.glance -i /etc/glance/rbd.keyring  Configuring the Sheepdog Storage Backend ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  *</literal>sheepdog_store_address=ADDR<literal>Optional. Default:</literal>localhost<literal>Can only be specified in configuration files.  `This option is specific to the Sheepdog storage backend.`  Sets the IP address of the sheep daemon  *</literal>sheepdog_store_port=PORT<literal>Optional. Default:</literal>7000<literal>Can only be specified in configuration files.  `This option is specific to the Sheepdog storage backend.`  Sets the IP port of the sheep daemon  *</literal>sheepdog_store_chunk_size=SIZE_IN_MB<literal>Optional. Default:</literal>64<literal>Can only be specified in configuration files.  `This option is specific to the Sheepdog storage backend.`  Images will be chunked into objects of this size (in megabytes). For best performance, this should be a power of two.  Configuring the Cinder Storage Backend ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  **Note**: Currently Cinder store is a partial implementation. After Cinder expose 'brick' library, and 'Readonly-volume-attaching', 'volume-multiple-attaching' enhancement ready, the store will support 'Upload' and 'Download' interface finally.  *</literal>cinder_catalog_info=&lt;service_type&gt;:&lt;service_name&gt;:&lt;endpoint_type&gt;<literal>Optional. Default:</literal>volume:cinder:publicURL<literal>Can only be specified in configuration files.  `This option is specific to the Cinder storage backend.`  Sets the info to match when looking for cinder in the service catalog. Format is : separated values of the form: &lt;service_type&gt;:&lt;service_name&gt;:&lt;endpoint_type&gt;  *</literal>cinder_endpoint_template=http://ADDR:PORT/VERSION/%(project_id)s<literal>Optional. Default:</literal>None<literal>Can only be specified in configuration files.  Override service catalog lookup with template for cinder endpoint. e.g. http://localhost:8776/v1/%(project_id)s  *</literal>os_region_name=REGION_NAME<literal>Optional. Default:</literal>None<literal>Can only be specified in configuration files.  Region name of this node.  *</literal>cinder_ca_certificates_file=CA_FILE_PATH<literal>Optional. Default:</literal>None<literal>Can only be specified in configuration files.  Location of ca certicates file to use for cinder client requests.  *</literal>cinder_http_retries=TIMES<literal>Optional. Default:</literal>3<literal>Can only be specified in configuration files.  Number of cinderclient retries on failed http calls.  *</literal>cinder_api_insecure=ON_OFF<literal>Optional. Default:</literal>False<literal>Can only be specified in configuration files.  Allow to perform insecure SSL requests to cinder.  Configuring the Image Cache ---------------------------  Glance API servers can be configured to have a local image cache. Caching of image files is transparent and happens using a piece of middleware that can optionally be placed in the server application pipeline.  This pipeline is configured in the PasteDeploy configuration file, &lt;component&gt;-paste.ini. You should not generally have to edit this file directly, as it ships with ready-made pipelines for all common deployment flavors.  Enabling the Image Cache Middleware ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  To enable the image cache middleware, the cache middleware must occur in the application pipeline **after** the appropriate context middleware.  The cache middleware should be in your</literal>glance-api-paste.ini<literal>in a section titled</literal>[filter:cache]<literal>. It should look like this::    [filter:cache]   paste.filter_factory = glance.api.middleware.cache:CacheFilter.factory  A ready-made application pipeline including this filter is defined in the</literal>glance-api-paste.ini<literal>file, looking like so::    [pipeline:glance-api-caching]   pipeline = versionnegotiation context cache apiv1app  To enable the above application pipeline, in your main</literal>glance-api.conf<literal>configuration file, select the appropriate deployment flavor like so::    [paste_deploy]   flavor = caching  Enabling the Image Cache Management Middleware ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  There is an optional</literal>cachemanage<literal>middleware that allows you to directly interact with cache images. Use this flavor in place of the</literal>cache<literal>flavor in your api config file.    [paste_deploy]   flavor = cachemanage  Configuration Options Affecting the Image Cache ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  .. note::    These configuration options must be set in both the glance-cache   and glance-api configuration files.   One main configuration file option affects the image cache.   *</literal>image_cache_dir=PATH<literal>Required when image cache middleware is enabled.  Default:</literal>/var/lib/glance/image-cache<literal>This is the base directory the image cache can write files to. Make sure the directory is writeable by the user running the</literal>glance-api<literal>server   *</literal>image_cache_driver=DRIVER<literal>Optional. Choice of</literal>sqlite<literal>or</literal>xattr<literal>Default:</literal>sqlite<literal>The default</literal>sqlite<literal>cache driver has no special dependencies, other than the</literal>python-sqlite3<literal>library, which is installed on virtually all operating systems with modern versions of Python. It stores information about the cached files in a SQLite database.  The</literal>xattr<literal>cache driver required the</literal>python-xattr&gt;=0.6.0<literal>library and requires that the filesystem containing</literal>image_cache_dir<literal>have access times tracked for all files (in other words, the noatime option CANNOT be set for that filesystem). In addition,</literal>user_xattr<literal>must be set on the filesystem's description line in fstab. Because of these requirements, the</literal>xattr<literal>cache driver is not available on Windows.   *</literal>image_cache_sqlite_db=DB_FILE<literal>Optional.  Default:</literal>cache.db<literal>When using the</literal>sqlite<literal>cache driver, you can set the name of the database that will be used to store the cached images information. The database is always contained in the</literal>image_cache_dir<literal>.   *</literal>image_cache_max_size=SIZE<literal>Optional.  Default:</literal>10737418240<literal>(10 GB)  Size, in bytes, that the image cache should be constrained to. Images files are cached automatically in the local image cache, even if the writing of that image file would put the total cache size over this size. The</literal>glance-cache-pruner<literal>executable is what prunes the image cache to be equal to or less than this value. The</literal>glance-cache-pruner<literal>executable is designed to be run via cron on a regular basis. See more about this executable in :doc:`Controlling the Growth of the Image Cache &lt;cache&gt;`   Configuring the Glance Registry -------------------------------  There are a number of configuration options in Glance that control how  this registry server operates. These configuration options are specified in the</literal>glance-registry.conf<literal>config file in the section</literal>[DEFAULT]<literal>.  **IMPORTANT NOTE**: The glance-registry service is only used in conjunction with the glance-api service when clients are using the v1 REST API. See `Configuring Glance APIs`_ for more info.  *</literal>sql_connection=CONNECTION_STRING<literal>(</literal>--sql-connection<literal>when specified   on command line)  Optional. Default:</literal>None<literal>Can be specified in configuration files. Can also be specified on the command-line for the</literal>glance-manage<literal>program.  Sets the SQLAlchemy connection string to use when connecting to the registry database. Please see the documentation for `SQLAlchemy connection strings &lt;http://www.sqlalchemy.org/docs/05/reference/sqlalchemy/connections.html&gt;`_ online. You must urlencode any special characters in CONNECTION_STRING.  *</literal>sql_timeout=SECONDS<literal>on command line)  Optional. Default:</literal>3600<literal>Can only be specified in configuration files.  Sets the number of seconds after which SQLAlchemy should reconnect to the datastore if no activity has been made on the connection.  Configuring Notifications -------------------------  Glance can optionally generate notifications to be logged or sent to a RabbitMQ queue. The configuration options are specified in the</literal>glance-api.conf<literal>config file in the section</literal>[DEFAULT]<literal>.  *</literal>notifier_strategy<literal>Optional. Default:</literal>noop<literal>Sets the strategy used for notifications. Options are</literal>logging<literal>,</literal>rabbit<literal>,</literal>qpid<literal>and</literal>noop<literal>. For more information :doc:`Glance notifications &lt;notifications&gt;`  *</literal>rabbit_host<literal>Optional. Default:</literal>localhost<literal>Host to connect to when using</literal>rabbit<literal>strategy.  *</literal>rabbit_port<literal>Optional. Default:</literal>5672<literal>Port to connect to when using</literal>rabbit<literal>strategy.  *</literal>rabbit_use_ssl<literal>Optional. Default:</literal>false<literal>Boolean to use SSL for connecting when using</literal>rabbit<literal>strategy.  *</literal>rabbit_userid<literal>Optional. Default:</literal>guest<literal>Userid to use for connection when using</literal>rabbit<literal>strategy.  *</literal>rabbit_password<literal>Optional. Default:</literal>guest<literal>Password to use for connection when using</literal>rabbit<literal>strategy.  *</literal>rabbit_virtual_host<literal>Optional. Default:</literal>/<literal>Virtual host to use for connection when using</literal>rabbit<literal>strategy.  *</literal>rabbit_notification_exchange<literal>Optional. Default:</literal>glance<literal>Exchange name to use for connection when using</literal>rabbit<literal>strategy.  *</literal>rabbit_notification_topic<literal>Optional. Default:</literal>notifications<literal>Topic to use for connection when using</literal>rabbit<literal>strategy.  *</literal>rabbit_max_retries<literal>Optional. Default:</literal>0<literal>Number of retries on communication failures when using</literal>rabbit<literal>strategy. A value of 0 means to retry forever.  *</literal>rabbit_retry_backoff<literal>Optional. Default:</literal>2<literal>Number of seconds to wait before reconnecting on failures when using</literal>rabbit<literal>strategy.  *</literal>rabbit_retry_max_backoff<literal>Optional. Default:</literal>30<literal>Maximum seconds to wait before reconnecting on failures when using</literal>rabbit<literal>strategy.  *</literal>rabbit_durable_queues<literal>Optional. Default:</literal>False<literal>Controls durability of exchange and queue when using</literal>rabbit<literal>strategy.  *</literal>qpid_notification_exchange<literal>Optional. Default:</literal>glance<literal>Message exchange to use when using the</literal>qpid<literal>notification strategy.  *</literal>qpid_notification_topic<literal>Optional. Default:</literal>glanice_notifications<literal>This is the topic prefix for notifications when using the</literal>qpid<literal>notification strategy. When a notification is sent at the</literal>info<literal>priority, the topic will be</literal>notifications.info<literal>. The same idea applies for the</literal>error<literal>and</literal>warn<literal>notification priorities. To receive all notifications, you would set up a receiver with a topic of</literal>notifications.*<literal>.  *</literal>qpid_host<literal>Optional. Default:</literal>localhost<literal>This is the hostname or IP address of the Qpid broker that will be used when Glance has been configured to use the</literal>qpid<literal>notification strategy.  *</literal>qpid_port<literal>Optional. Default:</literal>5672<literal>This is the port number to connect to on the Qpid broker,</literal>qpid_host<literal>, when using the</literal>qpid<literal>notification strategy.  *</literal>qpid_username<literal>Optional. Default: None  This is the username that Glance will use to authenticate with the Qpid broker if using the</literal>qpid<literal>notification strategy.  *</literal>qpid_password<literal>Optional. Default: None  This is the username that Glance will use to authenticate with the Qpid broker if using the</literal>qpid<literal>notification strategy.  *</literal>qpid_sasl_mechanisms<literal>Optional. Default: None  This is a space separated list of SASL mechanisms to use for authentication with the Qpid broker if using the</literal>qpid<literal>notification strategy.  *</literal>qpid_reconnect_timeout<literal>Optional. Default: None  This option specifies a timeout in seconds for automatic reconnect attempts to the Qpid broker if the</literal>qpid<literal>notification strategy is used.  In general, it is safe to leave all of the reconnect timing options not set. In that case, the Qpid client's default behavior will be used, which is to attempt to reconnect to the broker at exponential back-off intervals (in 1 second, then 2 seconds, then 4, 8, 16, etc).  *</literal>qpid_reconnect_limit<literal>Optional. Default: None  This option specifies a maximum number of reconnect attempts to the Qpid broker if the</literal>qpid<literal>notification strategy is being used.  Normally the Qpid client will continue attempting to reconnect until successful.  *</literal>qpid_reconnect_interval_min<literal>Optional. Default: None  This option specifies the minimum number of seconds between reconnection attempts if the</literal>qpid<literal>notification strategy is being used.  *</literal>qpid_reconnect_interval_max<literal>Optional. Default: None  This option specifies the maximum number of seconds between reconnection attempts if the</literal>qpid<literal>notification strategy is being used.  *</literal>qpid_reconnect_interval<literal>This option specifies the exact number of seconds between reconnection attempts if the</literal>qpid<literal>notification strategy is being used. Setting this option is equivalent to setting</literal>qpid_reconnect_interval_max<literal>and</literal>qpid_reconnect_interval_min<literal>to the same value.  *</literal>qpid_heartbeat<literal>Optional. Default:</literal>5<literal>This option is used to specify the number of seconds between heartbeat messages exchanged between the Qpid client and Qpid broker if the</literal>qpid<literal>notification strategy is being used.  Heartbeats are used to more quickly detect that a connection has been lost.  *</literal>qpid_protocol<literal>Optional. Default:</literal>tcp<literal>This option is used to specify the transport protocol to use if using the</literal>qpid<literal>notification strategy. To enable SSL, set this option to</literal>ssl<literal>.  *</literal>qpid_tcp_nodelay<literal>Optional. Default:</literal>True<literal>This option can be used to disable the TCP NODELAY option. It effectively disables the Nagle algorithm for the connection to the Qpid broker. This option only applies if the</literal>qpid<literal>notification strategy is used.  Configuring Access Policies ---------------------------  Access rules may be configured using a :doc:`Policy Configuration file &lt;policies&gt;`. Two configuration options tell the Glance API server about the policies to use.  *</literal>policy_file=PATH<literal>Optional. Default: Looks for a file called</literal>policy.json<literal>or</literal>glance.policy.json<literal>in standard configuration directories.  Policy file to load when starting the API server  *</literal>policy_default_rule=RULE<literal>Optional. Default: &quot;default&quot;  Name of the rule in the policy configuration file to use as the default rule  Configuring Glance Property Protections ---------------------------------------  Access to image meta properties may be configured using a :doc:`Property Protections Configuration file &lt;property-protections&gt;`.  The location for this file can be specified in the</literal>glance-api.conf<literal>config file in the section</literal>[DEFAULT]<literal>.  *</literal>property_protection_file=PATH<literal>Optional. Default: not enabled.  Configuring Glance APIs -----------------------  The glance-api service implents versions 1 and 2 of the OpenStack Images API. Disable either version of the Images API using the following options:  *</literal>enable_v1_api=&lt;True|False&gt;<literal>Optional. Default:</literal>True<literal>*</literal>enable_v2_api=&lt;True|False&gt;<literal>Optional. Default:</literal>True``
    </para>
    <para>
      <emphasis role="strong">IMPORTANT NOTE</emphasis>: The v1 API is
      implemented on top of the glance-registry service while the v2 API
      is not. This means that in order to use the v2 API, you must copy
      the necessary sql configuration from your glance-registry service
      to your glance-api configuration file.
    </para>
</section>
</section>
</section>
